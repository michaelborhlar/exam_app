{% extends 'exams/base.html' %}
{% block title %}Staff Dashboard{% endblock %}
{% block content %}
<h2 class="mb-4">Your Exams</h2>

<a class="btn btn-primary mb-3" href="{% url 'exams:create_exam' %}">➕ Create New Exam</a>
{% if exam.id %}
  <a class="btn btn-success" href="{% url 'exams:exam_results' exam.id %}">View Results</a>
{% endif %}

<div class="row">
  {% for exam in exams %}
    <div class="col-md-6 mb-3">
      <div class="card shadow-sm p-3 h-100">
        <h4 class="card-title">{{ exam.title }}</h4>
        <p class="card-text">{{ exam.description }}</p>
        <p><strong>Start:</strong> {{ exam.start_time }}  
           • <strong>Duration:</strong> {{ exam.duration_minutes }} mins</p>

        <div class="d-flex justify-content-between">
          <a class="btn btn-info btn-sm" href="{% url 'exams:exam_detail' exam.id %}">Manage</a>
          <a class="btn btn-warning btn-sm" href="{% url 'exams:edit_exam' exam.id %}">Edit</a>
          <a class="btn btn-danger btn-sm" href="{% url 'exams:delete_exam' exam.id %}">Delete</a>
          <a class="btn btn-success" href="{% url 'exams:exam_results' exam.id %}">View Results</a>
        </div>
      </div>
    </div>
  {% empty %}
    <p>No exams yet.</p>
  {% endfor %}
</div>

<hr class="mt-4">
<h3>Upload Questions from Word (.docx)</h3>
<form action="{% url 'exams:upload_docx' %}" method="post" enctype="multipart/form-data" class="mt-3">
  {% csrf_token %}
  {{ doc_form.as_p }}
  <button class="btn btn-success" type="submit">Upload and Parse</button>
</form>
{% endblock %}
